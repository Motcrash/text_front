<h1 class="title">Sells Orders Header</h1>

<div *ngIf="isLoading" class="loading-container">
  <div class="loading-spinner">
    <div class="spinner"></div>
    <p class="loading-text">Loading data...</p>
  </div>
</div>

<div *ngIf="hasError && !isLoading" class="error-container">
  <div class="error-message">
    <i class="dx-icon dx-icon-warning"></i>
    <h3>Error loading data</h3>
    <p>{{ errorMessage }}</p>
    <button class="retry-button" (click)="retryLoad()">
      Retry
    </button>
  </div>
</div>

<dx-data-grid
  *ngIf="!isLoading && !hasError"
  id="gridContainer"
  [dataSource]="dataSource"
  [remoteOperations]="false"
  [allowColumnReordering]="true"
  [rowAlternationEnabled]="true"
  [showBorders]="true"
  [width]="'100%'"
  (onContentReady)="contentReady($event)"
>
  <dxo-paging [pageSize]="10"></dxo-paging>
  <dxo-pager
    [visible]="true"
    [showPageSizeSelector]="true"
    [allowedPageSizes]="[10, 25, 50, 100]"
  ></dxo-pager>
  <dxo-search-panel
    [visible]="true"
    [highlightCaseSensitive]="true"
  ></dxo-search-panel>
  <dxo-group-panel [visible]="false"></dxo-group-panel>
  <dxo-grouping [autoExpandAll]="true"></dxo-grouping>
  
  <dxi-column dataField="salesOrderId" dataType="number" caption="Order ID" ></dxi-column>
  <dxi-column dataField="orderDate" dataType="date" caption="Order Date" format="shortDate" ></dxi-column>
  <dxi-column dataField="dueDate" dataType="date" caption="Due Date" format="shortDate" ></dxi-column>
  <dxi-column dataField="shipDate" dataType="date" caption="Ship Date" format="shortDate" ></dxi-column>
  <dxi-column dataField="onlineOrderFlag" dataType="boolean" caption="Online Order" cssClass="column-check-box"></dxi-column>
  <dxi-column dataField="subTotal" dataType="number" caption="Subtotal" format="currency" ></dxi-column>
  <dxi-column dataField="totalDue" dataType="number" caption="Total Due" format="currency" ></dxi-column>
  <dxi-column dataField="freight" dataType="number" caption="Freight" format="currency" ></dxi-column>
  <dxi-column dataField="comment" dataType="string" caption="Comments" ></dxi-column>
  <dxi-column dataField="modifiedDate" dataType="date" caption="Modified" format="shortDate" ></dxi-column>

  <div *dxTemplate="let d of 'discountCellTemplate'">
    <div class="chart-cell">
      <dx-bullet
        [showTarget]="false"
        [showZeroLevel]="true"
        [startScaleValue]="0"
        [endScaleValue]="100"
        [value]="d.value * 100"
      >
        <dxo-size [width]="150" [height]="35"></dxo-size>
        <dxo-tooltip
          [enabled]="true"
          [paddingTopBottom]="2"
          [customizeTooltip]="customizeTooltip"
        >
          <dxo-font [size]="18"></dxo-font>
        </dxo-tooltip>
        <dxo-margin [top]="5" [bottom]="0" [left]="5"></dxo-margin>
      </dx-bullet>
    </div>
  </div>
</dx-data-grid>